<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FRAT Proof-of-Concept</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style-core.css">
  <link rel="stylesheet" href="css/style-section1.css">
  <link rel="stylesheet" href="css/style-section2.css">
  <link rel="stylesheet" href="css/style-section3.css">
  <link rel="stylesheet" href="css/style-section4.css">
</head>

  <body>
<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     SECTION 1
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="wx-briefing" class="wx-briefing">
  <h2>
    Area Weather (METARs & TAFs)
    <span>
      <button id="refreshWeatherButton">ðŸ”„ Refresh</button>
      <button id="toggleWxButton">Show Nearby Weather</button>
    </span>
  </h2>

  <div id="wx-kcdw">
    <pre>Loading...</pre>
  </div>
  <div id="wx-extra"></div>

  <p style="font-size: 0.85em; color: #666; margin-top: 10px;">
    <strong>Disclaimer:</strong> This weather data is provided for convenience only and does not replace an official weather briefing. Pilots are responsible for obtaining a complete preflight weather briefing from an FAA-approved source.
  </p>
</div>

<div class="frat-section1">
  <h2>Section 1: Student &amp; Flight Info</h2>

  <div class="col-left">
    <label for="studentName" class="required-asterisk">1) Student Name</label>
    <input type="text" id="studentName" placeholder="Al Titude" required>

    <label for="flightDate" class="required-asterisk">2) Date of Flight</label>
    <input type="date" id="flightDate" required>

    <label for="certificateType" class="required-asterisk">3) Certificate Type</label>
    <select id="certificateType" required>
      <option value="">Select Certificate</option>
      <option value="Discovery Flight">Discovery Flight</option>
      <option value="Student Pilot (Local Flight)">Student Pilot (Local Flight)</option>
      <option value="Student Pilot (Cross-Country Flight)">Student Pilot (Cross-Country)</option>
      <option value="Private Pilot">Private Pilot</option>
      <option value="Commercial Pilot">Commercial Pilot</option>
      <option value="Airline Transport Pilot">Airline Transport Pilot</option>
    </select>

    <label for="flightRules" id="flightRulesLabel" class="required-asterisk">4) Flight Rules</label>
    <select id="flightRules" required>
      <option value="">Select Rules</option>
      <option value="VFR">VFR</option>
      <option value="IFR">IFR</option>
    </select>

    <label for="airplaneType" class="required-asterisk">5) Airplane Type</label>
    <select id="airplaneType" required>
      <option value="">Select Aircraft</option>
      <option value="C172S">C172S</option>
      <option value="C172R">C172R</option>
      <option value="C172P">C172P</option>
      <option value="C172S-G1000">C172S-G1000</option>
      <option value="C182T-G1000">C182T-G1000</option>
      <option value="PA-44-180">PA-44-180</option>
    </select>
  </div>

  <div class="col-right">
    <div class="frat-checkbox">
      <label for="instrumentRated" id="instrumentLabel">6) Instrument Rated</label>
      <input type="checkbox" id="instrumentRated">
    </div>

    <div class="frat-checkbox">
      <label for="renterWithoutInstruction" id="renterLabel">7) Renter (No Instruction)</label>
      <input type="checkbox" id="renterWithoutInstruction">
    </div>

    <div id="instructorSection">
      <label for="instructorName" id="instructorLabelHuman">8) Instructor Name</label>
      <select id="instructorName">
        <option value="">Select Instructor</option>
        <option value="Alexander Kresic">Alexander Kresic</option>
        <option value="Alexey Ozerov">Alexey Ozerov</option>
        <option value="Christopher Darby">Christopher Darby</option>
        <option value="Dmitry Avdeev">Dmitry Avdeev</option>
        <option value="Jay Saduakas">Jay Saduakas</option>
        <option value="Josselyne Aguilar">Josselyne Aguilar</option>
        <option value="Kyle Lacey">Kyle Lacey</option>
        <option value="Mark Gutierrez">Mark Gutierrez</option>
        <option value="Murad Gabr">Murad Gabr</option>
        <option value="Roman Konyushenko">Roman Konyushenko</option>
        <option value="Sham Perera">Sham Perera</option>
        <option value="Shavon Shirley">Shavon Shirley</option>
        <option value="Sheena Masters">Sheena Masters</option>
        <option value="Tony Hwang">Tony Hwang</option>
      </select>
    </div>

    <label for="passenger1">9) Passenger Names (Max 2)</label>
    <input type="text" id="passenger1" placeholder="Passenger 1">
    <input type="text" id="passenger2" placeholder="Passenger 2">
    <div style="text-align:center; margin-top: 1rem;">
      <button id="continueToSection2" disabled style="padding: 10px 20px; font-size: 1rem;">Continue to Risk Assessment</button>
    </div>
  </div>
</div>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     SECTION 2
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="section2" class="frat-section2">
  <h2>Section 2: Flight Risk Assessment Tool</h2>
  <div id="riskFactors"></div>
  <div id="riskScoreText">Total Risk Score: 0 â€” LOW RISK</div>
  <div id="riskProgressBar" class="pill-bar"></div>
  <button id="clearFRATButton" class="btn-clear-wb">Clear FRAT</button>
  <div style="text-align:center; margin-top: 20px;">
    <button id="continueToSection3" disabled style="padding: 10px 20px; font-size: 1rem;">
      Continue to Weight & Balance
    </button>
  </div>
</div>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     SECTION 3
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="frat-section3">
  <h2>Section 3: Weight & Balance â€” C172S</h2>

  <!-- Tail Number Selection -->
  <label for="tailNumber">Select Tail Number</label>
  <select id="tailNumber">
    <option value="">Select Tail Number</option>
  </select>

  <!-- Weight & Balance Table (Mobile-Friendly) -->
  <div class="wb-table-container">
    <table class="wb-table">
      <thead>
        <tr>
          <th>Station</th>
          <th>Weight (lbs)</th>
          <th>ARM (in)</th>
          <th>Moment (lb-in / 1000)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td data-label="Station">Basic Empty Weight</td>
          <td data-label="Weight (lbs)"><input type="number" id="emptyWeight" class="locked-input"></td>
          <td data-label="ARM (in)"><input type="number" id="emptyARM" readonly></td>
          <td data-label="Moment (lb-in / 1000)"><input type="number" id="emptyMoment" class="locked-input"></td>
        </tr>
        <tr>
          <td data-label="Station">Pilot & Front Passenger<br><small>(Enter combined weight)</small><br><small>Instructor: <span id="displayInstructorWeight">â€”</span> lbs</small></td>
          <td data-label="Weight (lbs)"><input type="number" id="frontWeight"></td>
          <td data-label="ARM (in)"><input type="number" value="37.0" readonly></td>
          <td data-label="Moment (lb-in / 1000)"><input type="number" id="frontMoment"></td>
        </tr>
        <tr>
          <td data-label="Station">Rear Passengers</td>
          <td data-label="Weight (lbs)"><input type="number" id="rearWeight"></td>
          <td data-label="ARM (in)"><input type="number" value="73.0" readonly></td>
          <td data-label="Moment (lb-in / 1000)"><input type="number" id="rearMoment"></td>
        </tr>
        <tr>
          <td data-label="Station">Fuel<br><small>Max 53 gal, 6 lbs/gal</small></td>
          <td data-label="Weight (lbs)"><input type="number" id="fuelWeight"></td>
          <td data-label="ARM (in)"><input type="number" value="48.0" readonly></td>
          <td data-label="Moment (lb-in / 1000)"><input type="number" id="fuelMoment"></td>
        </tr>
        <tr>
          <td data-label="Station">Baggage Area A</td>
          <td data-label="Weight (lbs)"><input type="number" id="baggageAWeight"></td>
          <td data-label="ARM (in)"><input type="number" value="95.0" readonly></td>
          <td data-label="Moment (lb-in / 1000)"><input type="number" id="baggageAMoment"></td>
        </tr>
        <tr>
          <td data-label="Station">Baggage Area B</td>
          <td data-label="Weight (lbs)"><input type="number" id="baggageBWeight"></td>
          <td data-label="ARM (in)"><input type="number" value="123.0" readonly></td>
          <td data-label="Moment (lb-in / 1000)"><input type="number" id="baggageBMoment"></td>
        </tr>
        <tr>
          <td colspan="4">
            <hr>
          </td>
        </tr>
        <tr>
          <td data-label="Station"><strong>Ramp Weight</strong></td>
          <td data-label="Weight (lbs)"><input type="number" id="rampWeight"></td>
          <td data-label="ARM (in)"><input type="number" id="rampCG" readonly></td>
          <td data-label="Moment (lb-in / 1000)"><input type="number" id="rampMoment"></td>
        </tr>
        <tr>
          <td data-label="Station">Start-up, Taxi, and Run-up</td>
          <td data-label="Weight (lbs)"><input type="number" value="-8" readonly></td>
          <td data-label="ARM (in)"><input type="text" value="â€”" readonly></td>
          <td data-label="Moment (lb-in / 1000)"><input type="number" value="-0.4" readonly></td>
        </tr>
        <tr>
          <td data-label="Station"><strong>Takeoff Weight</strong></td>
          <td data-label="Weight (lbs)"><input type="number" id="takeoffWeight"></td>
          <td data-label="ARM (in)"><input type="number" id="takeoffCG" readonly></td>
          <td data-label="Moment (lb-in / 1000)"><input type="number" id="takeoffMoment"></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div id="cgValidation" style="margin-top:10px; font-weight: bold;"></div>

  <div class="diagram-graph-flex">
    <div class="chart-wrapper">
      <h3>Station Reference Diagram</h3>
      <img id="stationDiagram" src="" alt="Station Diagram">
    </div>
    <div class="chart-wrapper">
      <h3>Loading Graph</h3>
      <div class="chart-inner">
        <img id="loadingGraph" class="loading-graph-img" src="https://raw.githubusercontent.com/xplaymanNY/AFTS-frat/main/images/loading-graphs/C172S_Loading%20Graph.svg" alt="C172S Loading Graph" />
        <div class="v-line" id="vLine"></div>
        <div class="h-line" id="hLine"></div>
      </div>
      <button id="resetRefLines" class="ref-reset-btn">Reset Reference Lines</button>
    </div>
  </div>

  <h3>CG Envelope & Moment/Weight Plot</h3>
  <div class="envelope-plot-container">
    <div class="chart-wrapper">
      <canvas id="cgEnvelopePlot" width="400" height="300"></canvas>
    </div>
    <div class="chart-wrapper">
      <canvas id="momentWeightPlot" width="400" height="300"></canvas>
    </div>
  </div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="frat-actions" id="section4Buttons">
  <button id="submitButton">Submit</button>
  <button id="printButton">Print</button>
</div>
    
    <script src="js/utils.js"></script>
    <script src="js/riskData.js"></script>
    <script src="js/weather.js"></script>
    <script src="js/section1.js"></script>
    <script src="js/section2.js"></script>
    <script src="js/section3.js"></script>
    <script src="js/submit.js"></script>
  </body>
</html>
